# 项目：桥梁车流量模拟器

## 简介

我们的桥梁车流量模拟器是一个基于C++和EasyX图形库开发的车辆交通流模拟系统，该程序能够模拟多车道桥梁上的车辆行驶行为，包括车辆生成、移动、变道、刹车、加速、故障处理以及碰撞检测等真实交通场景。

## 功能特点

### 桥梁参数自定义
- 用户可自定义桥梁长度、宽度和宽度放大率
- 程序自动根据屏幕大小调整显示窗口大小

### 智能车辆产生
- **多类型车辆**：随机生成四种不同尺寸的离散车型（小汽车、面包车、大巴车、大货车）
- **随机颜色**：每辆车都有着独特优美的随机颜色

### 真实交通行为模拟
- **智能刹车系统**：根据前方车辆距离分级减速
- **安全变道**：车辆在安全条件下自动变道超车
- **抛锚模拟**：随机车辆抛锚，速度逐渐降低直至停止
- **碰撞检测**：车辆间距过近时触发碰撞并停止
- **速度恢复**：在安全情况下自动恢复初始速度
- **故障处理**：~某一道上故障车存在时，该道被封锁，禁止新车辆生成与其他车道转入？待补充~

### 可视化与数据化界面
- 虚线车道与箭头方向指示，实时信息显示（桥梁参数、模拟时间）
- ~实时数据化输出车辆产生与故障情况分布的综合统计，并输出到csv文件，极大便利了后期数据处理？待补充~

## 技术实现

### 核心类结构

#### Vehicle 车辆类

```cpp
struct Vehicle {
int lane, if_change_lane, y; // 车道、变道状态、纵位置
double carlength, carwidth, x, speed, original_speed; // 车长、车宽、横位置、速度（以及原始速度）
int breakdown; // 故障状态
bool collision; // 碰撞状态
COLORREF color; // 颜色
};
```

#### Bridge 桥梁类

```cpp
struct Bridge {
double bridgeLength, bridgeWidth, widthScale; // 桥梁尺寸参数
void calculateWindowSize(...); // 窗口尺寸
};
```

### 关键函数

1. **前方车辆检索函数**：作为后续智能操作的基础，并且在变道中拓展到上下相邻行以检测安全变道条件
2. **刹车与回溯函数**：在动态安全距离下分级减速，在安全后分级加速
3. **安全变道函数**：考虑前方车距与上下车距的安全变道，伴随着优雅平滑的逐帧变道动画
4. **抛锚与故障处理函数**： ~目前空，待补充~
5. **数据输出函数**： ~目前空，待补充~

## 编译运行

### 环境要求
- Windows系统
- C++11及以上编译器
- EasyX图形库

## 使用说明

1. **启动程序**：开始运行
2. **输入参数**：
   - 桥梁长度（米）
   - 桥梁宽度（米） 
   - 桥宽放大率
3. **观察车流**：程序自动开始模拟桥梁车辆交通流
4. **结束模拟**：按任意键退出程序

## 开发团队

本模拟器由吴一凡、徐菀谦、李瀚洋、李友翔合作开发

每位组员都为本项目做出了卓绝的贡献，将共创、聆听、协作、互助等团队精神尽数完美呈现，请让我们对他们中的每一位均致以赞美与掌声！

~雷鸣般的掌声！~

## 扩展可能

- 添加交通信号灯控制
- 实现更多车辆类型和行为
- 增加数据统计和可视化
- 模拟更加复杂的大型道路网络
- 添加天气和当地环境影响
- 进一步完善后产生数据用于训练大模型，辅助实时车辆限流等市政规划

---

*综上，通过该模拟器，我们可以更好地理解和分析桥梁交通流的特性，为未来的桥梁交通规划和管理提供参考依据。甚至通过未来环境参数的加入，为具体环境下桥梁通畅性与最大车流量提供可靠的分析与支持*
